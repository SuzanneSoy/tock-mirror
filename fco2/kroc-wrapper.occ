-- KRoC wrapper to run Tock-generated CIF program

#INCLUDE "cifccsp.inc"

#PRAGMA EXTERNAL "PROC C.tock.main.init (INT raddr, CHAN BYTE in?, out!, err!) = 0"
#PRAGMA EXTERNAL "PROC C.tock.main.free (VAL INT raddr) = 0"

PROC kroc.main (CHAN BYTE in?, out!, err!)
  INT addr:
  SEQ
    C.tock.main.init (addr, in?, out!, err!)
    cifccsp.startprocess (addr)
    C.tock.main.free (addr)
:
